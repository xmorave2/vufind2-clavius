<? $worldCatTerms = $this->recommend->getTerms(); if (!empty($worldCatTerms)): ?>
<div class="authorbox">
  <h3><?=$this->transEsc('Subject Recommendations')?></h3>
    <? $i = 0; foreach ($worldCatTerms as $type => $section): ?>
      <div class="span-5<?=(++$i == count($worldCatTerms)) ? ' last' : ''?>">
        <dl>
          <dt><?=$this->transEsc('wcterms_' . $type)?></dt>
          <? $j = 0; foreach ($section as $subj): ?>
            <? if (++$j == 4): ?>
              <dd id="moreWCTerms<?=$this->escape($type)?>"><a href="#" onclick="moreFacets('WCTerms<?=$this->escape($type)?>'); return false;"><?=$this->transEsc('more')?> ...</a></dd>
              </dl>
              <dl class="offscreen" id="narrowGroupHidden_WCTerms<?=$this->escape($type)?>">
            <? endif; ?>
            <dd>&bull; <a href="<?=$this->url(array('controller' => 'Search', 'action' => 'Results'), 'default', true)?>?lookfor=%22<?=urlencode($subj)?>%22&amp;type=Subject"><?=$this->escape($subj)?></a></dd>
          <? endforeach; ?>
          <? if ($j > 3): ?><dd><a href="#" onclick="lessFacets('WCTerms<?=$this->escape($type)?>'); return false;"><?=$this->transEsc('less')?> ...</a></dd><? endif; ?>
        </dl>
      </div>
    <? endforeach; ?>
    <div class="clear"></div>
</div>
<? endif; ?>
